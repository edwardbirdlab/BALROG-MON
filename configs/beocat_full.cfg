/* Singularity options */

singularity.enabled = true
singularity.autoMounts = true
containerOptions = '--fakeroot --writable-tmpfs'

executor {
    name = 'slurm'
    queueSize = '100'
    submitRateLimit = '20/2min'
}


process {
    
    maxRetries = 3
//    errorStrategy = 'terminate'
    errorStrategy = 'retry'
//    errorStrategy = 'finish'
//    errorStrategy = 'ignore'

    withLabel: ultralow {   
        cpus = '1'
        memory = '4G'
        time = '2h'
        clusterOptions = '--tmp=200G'
    }

    withLabel: verylow {   
        cpus = '2'
        memory = '8G'
        time = '2h'
        clusterOptions = '--tmp=200G'
    }

    withLabel: lowmem {   
        cpus = '8'
        memory = '16G'
        time = '2h'
        clusterOptions = '--tmp=200G'
    }

    withLabel: lowmemnk {   
        cpus = '8'
        memory = '16G'
        time = '2h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

    withLabel: lowmemlong {   
        cpus = '8'
        memory = '16G'
        time = '8h'
        clusterOptions = '--tmp=200G'
        clusterOptions = '--gres=killable:0'
    }

    withLabel: kracken2 {   
        cpus = '16'
        memory = '30G'
        time = '24h'
        clusterOptions = '--tmp=200G'
    }

    withLabel: krackenuniq {   
        cpus = '16'
        memory = '24G'
        time = '24h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

    withLabel: kracken2_PlusPF {   
        cpus = '8'
        memory = '80G'
        time = '24h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

    withLabel: plasmer {   
        cpus = '16'
        memory = '100G'
        time = '5h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }


    withLabel: sylph_profile {   
        cpus = '20'
        memory = '30G'
        time = '1h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }


    withLabel: midmem {   
        cpus = '16'
        memory = '50G'
        time = '6h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

    withLabel: midmemlong {   
        cpus = '16'
        memory = '50G'
        time = '24h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

    withLabel: samtoolssort {   
        cpus = '1'
        memory = '50G'
        time = '6h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

    withLabel: porechop {   
        cpus = '16'
        memory = '50G'
        time = '4h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

     withLabel: medmem {   
        cpus = '16'
        memory = '100G'
        time = '24h'
        clusterOptions = '--tmp=200G'
        //clusterOptions = '--gres=killable:0'
    }

     withLabel: bigmem {   
        cpus = '16'
        memory = '384G'
        time = '4h'
        //clusterOptions = '--tmp=200G'
    }

     withLabel: small {   
        cpus = '2'
        memory = '8G'
        time = '12h'
    }

}
